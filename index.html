<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Calculateur de baies non protégées (CNB)</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
      line-height: 1.6;
      margin: 0;
      padding: 0;
      background-color: #f8f9fa;
    }
    
    .container {
      max-width: 1000px;
      margin: 0 auto;
      padding: 20px;
      background-color: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    
    h1 {
      font-size: 24px;
      margin-bottom: 20px;
      color: #333;
      text-align: center;
    }
    
    .grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 20px;
    }
    
    @media (min-width: 768px) {
      .grid {
        grid-template-columns: 1fr 1fr;
      }
    }
    
    .form-group {
      margin-bottom: 15px;
    }
    
    label {
      display: block;
      margin-bottom: 5px;
      font-weight: 500;
      color: #444;
    }
    
    input[type="number"],
    select {
      width: 100%;
      padding: 8px 12px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 16px;
    }
    
    button {
      background-color: #2271b1;
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
      font-weight: 500;
      width: 100%;
      margin-top: 20px;
    }
    
    button:hover {
      background-color: #135e96;
    }
    
    .results {
      background-color: #f0f0f1;
      padding: 20px;
      border-radius: 8px;
      min-height: 250px;
    }
    
    .message {
      text-align: center;
      color: #666;
      padding: 20px 0;
    }
    
    .details {
      background-color: #e4e4e7;
      padding: 15px;
      border-radius: 4px;
      font-family: monospace;
      white-space: pre-wrap;
      font-size: 14px;
      margin-top: 15px;
    }
    
    .highlight {
      color: #2271b1;
      font-weight: bold;
    }
    
    .footer {
      margin-top: 20px;
      font-size: 13px;
      color: #666;
      text-align: center;
    }
    
    .tabs {
      display: flex;
      margin-bottom: 20px;
      border-bottom: 1px solid #ddd;
    }
    
    .tab {
      padding: 10px 20px;
      cursor: pointer;
      border: 1px solid transparent;
      border-bottom: none;
      border-radius: 4px 4px 0 0;
      background-color: #f0f0f1;
      margin-right: 5px;
    }
    
    .tab.active {
      background-color: #fff;
      border-color: #ddd;
      border-bottom-color: #fff;
      margin-bottom: -1px;
      font-weight: bold;
    }
    
    .tab-content {
      display: none;
    }
    
    .tab-content.active {
      display: block;
    }
    
    .hint {
      font-size: 12px;
      color: #555;
      margin-top: 5px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Calculateur de baies non protégées (CNB)</h1>
    
    <div class="tabs">
      <div class="tab active" data-tab="part3">Partie 3 (3.2.3)</div>
      <div class="tab" data-tab="part9-14">Partie 9 (9.10.14)</div>
      <div class="tab" data-tab="part9-15">Partie 9 (9.10.15)</div>
    </div>
    
    <!-- Onglet Partie 3 -->
    <div class="tab-content active" id="part3">
      <div class="grid">
        <div>
          <div class="form-group">
            <label for="usage-batiment">Usage du bâtiment</label>
            <select id="usage-batiment">
              <option value="habitation">Habitation (Groupe C)</option>
              <option value="affaires">Affaires/Division 3 (Groupe A, B, D, F3)</option>
              <option value="commercial">Commercial (Groupe E)</option>
              <option value="industriel">Industriel div. 1 et 2 (Groupe F1, F2)</option>
            </select>
          </div>
          
          <div class="form-group">
            <label>Protection par gicleurs</label>
            <div>
              <input type="checkbox" id="gicleurs">
              <span>Bâtiment entièrement protégé par gicleurs</span>
            </div>
          </div>
          
          <div class="form-group">
            <label for="distance">Distance limitative (m)</label>
            <input type="number" id="distance" min="0" step="0.1" value="1.2">
          </div>
          
          <div class="form-group">
            <label for="surface">Surface de la façade de rayonnement (m²)</label>
            <input type="number" id="surface" min="1" value="30">
          </div>
          
          <div class="form-group" id="rapport-container">
            <label for="rapport">Rapport L/H ou H/L</label>
            <select id="rapport">
              <option value="moins3">Moins de 3:1</option>
              <option value="3a10">3:1 à 10:1</option>
              <option value="plus10">Plus de 10:1</option>
            </select>
          </div>
          
          <div class="form-group">
            <label>Délai d'intervention du service d'incendie</label>
            <div>
              <input type="checkbox" id="intervention">
              <span>Plus de 10 min dans 10% ou plus des cas</span>
            </div>
          </div>
          
          <button id="calculer">Calculer</button>
        </div>
        
        <div class="results" id="resultats">
          <div class="message">
            Les résultats s'afficheront ici après le calcul
          </div>
        </div>
      </div>
    </div>
    
    <!-- Onglet Partie 9.10.14 -->
    <div class="tab-content" id="part9-14">
      <div class="grid">
        <div>
          <div class="form-group">
            <label for="usage-batiment-914">Usage du bâtiment</label>
            <select id="usage-batiment-914">
              <option value="habitation">Habitation (Groupe C)</option>
              <option value="affaires">Affaires/Division 3 (Groupe A, B, D, F3)</option>
              <option value="commercial">Commercial (Groupe E)</option>
              <option value="industriel">Industriel div. 1 et 2 (Groupe F1, F2)</option>
            </select>
          </div>
          
          <div class="form-group">
            <label>Protection par gicleurs</label>
            <div>
              <input type="checkbox" id="gicleurs-914">
              <span>Bâtiment entièrement protégé par gicleurs</span>
            </div>
          </div>
          
          <div class="form-group">
            <label for="distance-914">Distance limitative (m)</label>
            <input type="number" id="distance-914" min="0" step="0.1" value="2.45">
          </div>
          
          <div class="form-group">
            <label for="surface-914">Surface de la façade de rayonnement (m²)</label>
            <input type="number" id="surface-914" min="1" value="77">
          </div>
          
          <div class="form-group" id="rapport-container-914">
            <label for="rapport-914">Rapport L/H ou H/L</label>
            <select id="rapport-914">
              <option value="moins3">Moins de 3:1</option>
              <option value="3a10">3:1 à 10:1</option>
              <option value="plus10">Plus de 10:1</option>
            </select>
          </div>
          
          <div class="form-group">
            <label>Délai d'intervention du service d'incendie</label>
            <div>
              <input type="checkbox" id="intervention-914">
              <span>Plus de 10 min dans 10% ou plus des cas</span>
            </div>
          </div>

          <div class="form-group">
            <label for="fenetre-existante-914">Surface existante des baies non protégées (m²)</label>
            <input type="number" id="fenetre-existante-914" min="0" step="0.1" value="7.8">
          </div>
          
          <button id="calculer-914">Calculer</button>
        </div>
        
        <div class="results" id="resultats-914">
          <div class="message">
            Les résultats s'afficheront ici après le calcul
          </div>
        </div>
      </div>
    </div>
    
    <!-- Onglet Partie 9.10.15 -->
    <div class="tab-content" id="part9-15">
      <div class="grid">
        <div>
          <div class="form-group">
            <label for="distance-915">Distance limitative (m)</label>
            <input type="number" id="distance-915" min="0" step="0.1" value="2.45">
          </div>
          
          <div class="form-group">
            <label for="surface-915">Surface de la façade de rayonnement (m²)</label>
            <input type="number" id="surface-915" min="1" value="11">
            <div class="hint">Note: Ce calcul s'applique uniquement aux bâtiments qui renferment des logements et où aucun logement n'est situé au-dessus d'un autre.</div>
          </div>
          
          <div class="form-group">
            <label>Protection par gicleurs</label>
            <div>
              <input type="checkbox" id="gicleurs-915">
              <span>Bâtiment entièrement protégé par gicleurs</span>
            </div>
          </div>
          
          <div class="form-group">
            <label>Délai d'intervention du service d'incendie</label>
            <div>
              <input type="checkbox" id="intervention-915">
              <span>Plus de 10 min dans 10% ou plus des cas</span>
            </div>
          </div>

          <div class="form-group">
            <label for="fenetre-existante-915">Surface existante des baies non protégées (m²)</label>
            <input type="number" id="fenetre-existante-915" min="0" step="0.1" value="3.34">
          </div>
          
          <button id="calculer-915">Calculer</button>
        </div>
        
        <div class="results" id="resultats-915">
          <div class="message">
            Les résultats s'afficheront ici après le calcul
          </div>
        </div>
      </div>
    </div>
    
    <div class="footer">
      <p>Note: Cet outil utilise les tableaux du Code national du bâtiment du Canada pour déterminer la surface maximale des baies non protégées dans une façade de rayonnement.</p>
      <p>Les valeurs calculées sont basées sur les tableaux 3.2.3.1.-B, 3.2.3.1.-C, 3.2.3.1.-D, 3.2.3.1.-E, 9.10.14.4.-A et 9.10.15.4 du CNB 2015 (intégrant les modifications du Québec).</p>
    </div>
  </div>
  
  <script>
    // Gestion des onglets
    const tabs = document.querySelectorAll('.tab');
    const tabContents = document.querySelectorAll('.tab-content');
    
    tabs.forEach(tab => {
      tab.addEventListener('click', () => {
        // Désactiver tous les onglets
        tabs.forEach(t => t.classList.remove('active'));
        tabContents.forEach(c => c.classList.remove('active'));
        
        // Activer l'onglet cliqué
        tab.classList.add('active');
        const tabId = tab.getAttribute('data-tab');
        document.getElementById(tabId).classList.add('active');
      });
    });
    
    // Référence aux éléments du DOM - Partie 3 (3.2.3)
    const usageBatiment = document.getElementById('usage-batiment');
    const gicleurs = document.getElementById('gicleurs');
    const distance = document.getElementById('distance');
    const surface = document.getElementById('surface');
    const rapport = document.getElementById('rapport');
    const rapportContainer = document.getElementById('rapport-container');
    const intervention = document.getElementById('intervention');
    const calculer = document.getElementById('calculer');
    const resultats = document.getElementById('resultats');
    
    // Référence aux éléments du DOM - Partie 9 (9.10.14)
    const usageBatiment914 = document.getElementById('usage-batiment-914');
    const gicleurs914 = document.getElementById('gicleurs-914');
    const distance914 = document.getElementById('distance-914');
    const surface914 = document.getElementById('surface-914');
    const rapport914 = document.getElementById('rapport-914');
    const rapportContainer914 = document.getElementById('rapport-container-914');
    const intervention914 = document.getElementById('intervention-914');
    const fenetreExistante914 = document.getElementById('fenetre-existante-914');
    const calculer914 = document.getElementById('calculer-914');
    const resultats914 = document.getElementById('resultats-914');
    
    // Référence aux éléments du DOM - Partie 9 (9.10.15)
    const distance915 = document.getElementById('distance-915');
    const surface915 = document.getElementById('surface-915');
    const gicleurs915 = document.getElementById('gicleurs-915');
    const intervention915 = document.getElementById('intervention-915');
    const fenetreExistante915 = document.getElementById('fenetre-existante-915');
    const calculer915 = document.getElementById('calculer-915');
    const resultats915 = document.getElementById('resultats-915');
    
    // ====== TABLEAUX DE DONNÉES POUR LES CALCULS =======
    
    // Tableaux des valeurs du CNB - Partie 3 (3.2.3)
    // Tableau 3.2.3.1.-B - Bâtiments non entièrement protégés par gicleurs (Groupe A, B, C, D, F3)
    const tableauABCDF3 = {
      'moins3': {
        30: {0: 0, 1.2: 8, 1.5: 10, 2.0: 18, 2.5: 29, 3: 46, 4: 91, 5: 100, 6: 100, 7: 100, 8: 100, 9: 100, 10: 100},
        40: {0: 0, 1.2: 7, 1.5: 8, 2.0: 11, 2.5: 32, 3: 50, 4: 96, 5: 100, 6: 100, 7: 100, 8: 100, 9: 100, 10: 100},
        50: {0: 0, 1.2: 7, 1.5: 8, 2.0: 10, 2.5: 28, 3: 37, 4: 67, 5: 100, 6: 100, 7: 100, 8: 100, 9: 100, 10: 100},
        100: {0: 0, 1.2: 7, 1.5: 8, 2.0: 9, 2.5: 18, 3: 28, 4: 40, 5: 55, 6: 92, 7: 100, 8: 100, 9: 100, 10: 100}
      },
      '3a10': {
        30: {0: 0, 1.2: 8, 1.5: 12, 2.0: 21, 2.5: 33, 3: 50, 4: 96, 5: 100, 6: 100, 7: 100, 8: 100, 9: 100, 10: 100},
        40: {0: 0, 1.2: 8, 1.5: 10, 2.0: 17, 2.5: 25, 3: 37, 4: 67, 5: 100, 6: 100, 7: 100, 8: 100, 9: 100, 10: 100},
        50: {0: 0, 1.2: 8, 1.5: 10, 2.0: 15, 2.5: 21, 3: 30, 4: 53, 5: 85, 6: 100, 7: 100, 8: 100, 9: 100, 10: 100},
        100: {0: 0, 1.2: 8, 1.5: 9, 2.0: 13, 2.5: 19, 3: 26, 4: 45, 5: 70, 6: 100, 7: 100, 8: 100, 9: 100, 10: 100}
      },
      'plus10': {
        30: {0: 0, 1.2: 11, 1.5: 18, 2.0: 32, 2.5: 48, 3: 68, 4: 100, 5: 100, 6: 100, 7: 100, 8: 100, 9: 100, 10: 100},
        40: {0: 0, 1.2: 10, 1.5: 15, 2.0: 26, 2.5: 39, 3: 53, 4: 87, 5: 100, 6: 100, 7: 100, 8: 100, 9: 100, 10: 100},
        50: {0: 0, 1.2: 9, 1.5: 14, 2.0: 23, 2.5: 33, 3: 45, 4: 72, 5: 100, 6: 100, 7: 100, 8: 100, 9: 100, 10: 100},
        100: {0: 0, 1.2: 9, 1.5: 13, 2.0: 21, 2.5: 30, 3: 39, 4: 62, 5: 90, 6: 100, 7: 100, 8: 100, 9: 100, 10: 100}
      }
    };
    
    // Tableau 3.2.3.1.-C - Bâtiments non entièrement protégés par gicleurs (Groupe E, F1, F2)
    const tableauEF1F2 = {
      'moins3': {
        30: {0: 0, 1.2: 4, 1.5: 5, 2.0: 9, 2.5: 15, 3: 23, 4: 46, 5: 77, 6: 100, 7: 100, 8: 100, 9: 100, 10: 100},
        40: {0: 0, 1.2: 4, 1.5: 4, 2.0: 6, 2.5: 16, 3: 34, 4: 61, 5: 97, 6: 100, 7: 100, 8: 100, 9: 100, 10: 100},
        50: {0: 0, 1.2: 4, 1.5: 4, 2.0: 5, 2.5: 14, 3: 29, 4: 50, 5: 79, 6: 100, 7: 100, 8: 100, 9: 100, 10: 100},
        100: {0: 0, 1.2: 4, 1.5: 4, 2.0: 4, 2.5: 9, 3: 17, 4: 28, 5: 42, 6: 60, 7: 100, 8: 100, 9: 100, 10: 100}
      },
      '3a10': {
        30: {0: 0, 1.2: 4, 1.5: 6, 2.0: 10, 2.5: 17, 3: 25, 4: 48, 5: 79, 6: 100, 7: 100, 8: 100, 9: 100, 10: 100},
        40: {0: 0, 1.2: 4, 1.5: 5, 2.0: 8, 2.5: 13, 3: 18, 4: 34, 5: 55, 6: 82, 7: 100, 8: 100, 9: 100, 10: 100},
        50: {0: 0, 1.2: 4, 1.5: 5, 2.0: 7, 2.5: 11, 3: 15, 4: 27, 5: 43, 6: 63, 7: 87, 8: 100, 9: 100, 10: 100},
        100: {0: 0, 1.2: 4, 1.5: 4, 2.0: 6, 2.5: 10, 3: 14, 4: 20, 5: 29, 6: 40, 7: 51, 8: 60, 9: 79, 10: 100}
      },
      'plus10': {
        30: {0: 0, 1.2: 5, 1.5: 9, 2.0: 16, 2.5: 24, 3: 34, 4: 58, 5: 91, 6: 100, 7: 100, 8: 100, 9: 100, 10: 100},
        40: {0: 0, 1.2: 5, 1.5: 8, 2.0: 13, 2.5: 19, 3: 26, 4: 43, 5: 66, 6: 93, 7: 100, 8: 100, 9: 100, 10: 100},
        50: {0: 0, 1.2: 4, 1.5: 7, 2.0: 11, 2.5: 17, 3: 22, 4: 36, 5: 53, 6: 74, 7: 99, 8: 100, 9: 100, 10: 100},
        100: {0: 0, 1.2: 4, 1.5: 6, 2.0: 10, 2.5: 15, 3: 20, 4: 31, 5: 45, 6: 62, 7: 82, 8: 100, 9: 100, 10: 100}
      }
    };
    
    // Tableau 3.2.3.1.-D - Bâtiments entièrement protégés par gicleurs (Groupe A, B, C, D, F3)
    const tableauGicleursABCDF3 = {
      10: {0: 0, 1.2: 16, 1.5: 24, 2.0: 42, 2.5: 66, 3: 100, 4: 100, 5: 100, 6: 100, 7: 100, 8: 100, 9: 100},
      15: {0: 0, 1.2: 16, 1.5: 20, 2.0: 34, 2.5: 50, 3: 74, 4: 100, 5: 100, 6: 100, 7: 100, 8: 100, 9: 100},
      20: {0: 0, 1.2: 16, 1.5: 20, 2.0: 30, 2.5: 42, 3: 60, 4: 100, 5: 100, 6: 100, 7: 100, 8: 100, 9: 100},
      25: {0: 0, 1.2: 16, 1.5: 18, 2.0: 26, 2.5: 38, 3: 52, 4: 90, 5: 100, 6: 100, 7: 100, 8: 100, 9: 100},
      30: {0: 0, 1.2: 14, 1.5: 18, 2.0: 24, 2.5: 34, 3: 46, 4: 78, 5: 100, 6: 100, 7: 100, 8: 100, 9: 100},
      40: {0: 0, 1.2: 14, 1.5: 16, 2.0: 22, 2.5: 30, 3: 40, 4: 64, 5: 96, 6: 100, 7: 100, 8: 100, 9: 100},
      50: {0: 0, 1.2: 14, 1.5: 16, 2.0: 20, 2.5: 28, 3: 36, 4: 56, 5: 82, 6: 100, 7: 100, 8: 100, 9: 100},
      60: {0: 0, 1.2: 14, 1.5: 16, 2.0: 20, 2.5: 26, 3: 32, 4: 50, 5: 72, 6: 98, 7: 100, 8: 100, 9: 100},
      80: {0: 0, 1.2: 14, 1.5: 16, 2.0: 18, 2.5: 22, 3: 28, 4: 42, 5: 58, 6: 80, 7: 100, 8: 100, 9: 100},
      100: {0: 0, 1.2: 14, 1.5: 16, 2.0: 18, 2.5: 22, 3: 26, 4: 36, 5: 50, 6: 68, 7: 88, 8: 100, 9: 100},
      150: {0: 0, 1.2: 14, 1.5: 14, 2.0: 16, 2.5: 20, 3: 22, 4: 30, 5: 40, 6: 52, 7: 66, 8: 82, 9: 100}
    };
    
    // Tableau 3.2.3.1.-E - Bâtiments entièrement protégés par gicleurs (Groupe E, F1, F2)
    const tableauGicleursEF1F2 = {
      10: {0: 0, 1.2: 8, 1.5: 12, 2.0: 20, 2.5: 34, 3: 50, 4: 96, 5: 100, 6: 100, 7: 100, 8: 100, 9: 100, 10: 100},
      15: {0: 0, 1.2: 8, 1.5: 10, 2.0: 16, 2.5: 26, 3: 36, 4: 68, 5: 100, 6: 100, 7: 100, 8: 100, 9: 100, 10: 100},
      20: {0: 0, 1.2: 8, 1.5: 10, 2.0: 14, 2.5: 22, 3: 30, 4: 54, 5: 86, 6: 100, 7: 100, 8: 100, 9: 100, 10: 100},
      25: {0: 0, 1.2: 8, 1.5: 10, 2.0: 14, 2.5: 18, 3: 26, 4: 44, 5: 70, 6: 100, 7: 100, 8: 100, 9: 100, 10: 100},
      30: {0: 0, 1.2: 8, 1.5: 8, 2.0: 12, 2.5: 18, 3: 24, 4: 40, 5: 60, 6: 88, 7: 100, 8: 100, 9: 100, 10: 100},
      40: {0: 0, 1.2: 8, 1.5: 8, 2.0: 12, 2.5: 16, 3: 20, 4: 32, 5: 48, 6: 68, 7: 94, 8: 100, 9: 100, 10: 100},
      50: {0: 0, 1.2: 8, 1.5: 8, 2.0: 10, 2.5: 14, 3: 18, 4: 28, 5: 40, 6: 58, 7: 76, 8: 100, 9: 100, 10: 100},
      60: {0: 0, 1.2: 8, 1.5: 8, 2.0: 10, 2.5: 12, 3: 16, 4: 24, 5: 36, 6: 50, 7: 66, 8: 86, 9: 100, 10: 100},
      80: {0: 0, 1.2: 8, 1.5: 8, 2.0: 10, 2.5: 12, 3: 14, 4: 20, 5: 30, 6: 40, 7: 52, 8: 66, 9: 84, 10: 100},
      100: {0: 0, 1.2: 8, 1.5: 8, 2.0: 8, 2.5: 10, 3: 12, 4: 18, 5: 26, 6: 34, 7: 44, 8: 56, 9: 70, 10: 84, 11: 100},
      150: {0: 0, 1.2: 8, 1.5: 8, 2.0: 8, 2.5: 10, 3: 12, 4: 16, 5: 20, 6: 26, 7: 32, 8: 40, 9: 50, 10: 60, 11: 72, 12: 84, 13: 98, 14: 100, 15: 100}
