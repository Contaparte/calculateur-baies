<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Calculateur de baies non protégées (CNB)</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background-color: #fef7f2; }
    #app { max-width: 800px; margin: 0 auto; padding: 20px; background-color: white; border-radius: 8px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); }
    h1 { color: #333; text-align: center; }
    .tab-nav { overflow: hidden; background-color: #f1f1f1; border-bottom: 1px solid #ccc; }
    .tab-nav button { background-color: inherit; color: #333; float: left; border: none; outline: none; cursor: pointer; padding: 14px 16px; transition: 0.3s; font-size: 16px; }
    .tab-nav button:hover { background-color: #ddd; }
    .tab-nav button.active { background-color: #004d99; color: white; }
    .tab-content { display: none; padding: 20px; border: 1px solid #ccc; border-top: none; }
    .tab-content.active { display: block; }
    .form-group { margin-bottom: 15px; }
    label { display: block; margin: 10px 0; font-size: 16px; }
    input[type="number"], select { width: 100%; padding: 8px; margin-top: 5px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
    button { margin: 10px 0; padding: 10px 20px; background-color: #007BFF; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 16px; }
    button:hover { background-color: #0056b3; }
    .results { background-color: #f1f1f1; padding: 20px; border-radius: 8px; margin-top: 20px; }
    .info { font-style: italic; font-size: 14px; color: #666; margin-top: 5px; }
    .tooltip { position: relative; display: inline-block; margin-left: 5px; vertical-align: top; }
    .tooltip .tooltip-icon { background-color: #aaaaaa; color: white; width: 16px; height: 16px; border-radius: 50%; display: inline-block; text-align: center; font-size: 11px; line-height: 16px; cursor: help; }
    .tooltip .tooltip-text { visibility: hidden; width: 250px; background-color: #555; color: #fff; text-align: left; border-radius: 6px; padding: 8px; position: absolute; z-index: 1; bottom: 125%; left: 50%; margin-left: -125px; opacity: 0; transition: opacity 0.3s; font-style: normal; font-size: 13px; }
    .tooltip:hover .tooltip-text { visibility: visible; opacity: 1; }
    .visual-box { display: none; }
    .copy-btn { background-color: #28a745; }
    .copy-btn:hover { background-color: #218838; }
    .section-title { background-color: #e9ecef; padding: 8px 12px; margin-top: 15px; border-radius: 4px; }
    .spacing-input { width: calc(50% - 10px); display: inline-block; }
    .spacing-input:first-child { margin-right: 10px; }
    .metric-input, .imperial-input { transition: all 0.3s; }
  </style>
</head>
<body>
  <div id="app">
    <h1>Calculateur de baies non protégées (CNB)</h1>

    <!-- Sélecteur du système de mesure -->
    <div class="form-group">
      <label for="measurementSystem">Système de mesure :</label>
      <select id="measurementSystem" onchange="toggleMeasurementSystem()">
        <option value="metric">Métrique (m, m²)</option>
        <option value="imperial">Impérial (pi, pi²)</option>
      </select>
    </div>

    <div class="tab-nav">
      <button class="tab-link active" onclick="openTab(event, 'cnb')">Méthode CNB (3.2.3.)</button>
      <button class="tab-link" onclick="openTab(event, 'method91014')">Méthode 9.10.14</button>
      <button class="tab-link" onclick="openTab(event, 'method91015')">Méthode 9.10.15</button>
    </div>

        <div id="cnb" class="tab-content active">
      <p>Calcul basé sur la section 3.2.3 du CNB</p>

      <div class="form-group">
        <label for="usage_cnb">Usage du bâtiment</label>
        <select id="usage_cnb">
          <option value="groupes_A_B3_C_D_F3">Usages des groupes A, B division 3, C, D et F division 3</option>
          <option value="groupes_E_F1_F2">Usages des groupes E et F divisions 1 et 2</option>
        </select>
      </div>

      <div class="form-group">
        <label for="distance_cnb">Distance limitative</label>
        <input type="number" id="distance_cnb" class="metric-input" placeholder="m" step="0.1">
        <input type="number" id="distance_cnb_imperial" class="imperial-input" placeholder="pi" style="display: none;">
      </div>

      <div class="form-group">
        <label for="surface_cnb">Surface de la façade de rayonnement</label>
        <input type="number" id="surface_cnb" class="metric-input" placeholder="m²">
        <input type="number" id="surface_cnb_imperial" class="imperial-input" placeholder="pi²" style="display: none;">
      </div>

      <div class="form-group">
        <label for="proposed_area_cnb">Surface proposée de baies non protégées</label>
        <input type="number" id="proposed_area_cnb" class="metric-input" placeholder="m²">
        <input type="number" id="proposed_area_cnb_imperial" class="imperial-input" placeholder="pi²" style="display: none;">
      </div>

      <button id="calculate_cnb" onclick="calculateCNB()">Calculer</button>
      <div id="cnb-result" class="results"></div>
    </div>

    <div id="method91014" class="tab-content">
      <p>Calcul basé sur la sous-section 9.10.14 du CNB</p>

      <div class="form-group">
        <label for="usage_91014">Usage du bâtiment</label>
        <select id="usage_91014">
          <option value="habitation">Habitation, établissement d'affaires et établissement industriel à risques faibles</option>
          <option value="commercial">Établissement commercial et établissement industriel à risques moyens</option>
        </select>
      </div>

      <div class="form-group">
        <label for="distance_91014">Distance limitative</label>
        <input type="number" id="distance_91014" class="metric-input" placeholder="m" step="0.1">
        <input type="number" id="distance_91014_imperial" class="imperial-input" placeholder="pi" style="display: none;">
      </div>

            <div class="form-group">
        <label for="surface_91014">Surface de la façade de rayonnement</label>
        <input type="number" id="surface_91014" class="metric-input" placeholder="m²">
        <input type="number" id="surface_91014_imperial" class="imperial-input" placeholder="pi²" style="display: none;">
      </div>

      <div class="form-group">
        <label for="proposed_area_91014">Surface proposée de baies non protégées</label>
        <input type="number" id="proposed_area_91014" class="metric-input" placeholder="m²">
        <input type="number" id="proposed_area_91014_imperial" class="imperial-input" placeholder="pi²" style="display: none;">
      </div>

      <button id="calculate_91014" onclick="calculate91014()">Calculer</button>
      <div id="method91014-result" class="results"></div>
    </div>

    <div id="method91015" class="tab-content">
      <p>Calcul basé sur la sous-section 9.10.15 du CNB</p>

      <div class="form-group">
        <label for="distance_91015">Distance limitative</label>
        <input type="number" id="distance_91015" class="metric-input" placeholder="m" step="0.1">
        <input type="number" id="distance_91015_imperial" class="imperial-input" placeholder="pi" style="display: none;">
      </div>

      <div class="form-group">
        <label for="surface_91015">Surface de la façade de rayonnement</label>
        <input type="number" id="surface_91015" class="metric-input" placeholder="m²">
        <input type="number" id="surface_91015_imperial" class="imperial-input" placeholder="pi²" style="display: none;">
      </div>

      <div class="form-group">
        <label for="proposed_area_91015">Surface proposée de baies non protégées</label>
        <input type="number" id="proposed_area_91015" class="metric-input" placeholder="m²">
        <input type="number" id="proposed_area_91015_imperial" class="imperial-input" placeholder="pi²" style="display: none;">
      </div>

      <button id="calculate_91015" onclick="calculate91015()">Calculer</button>
      <div id="method91015-result" class="results"></div>
        </div>

  </div> <!-- Fin de #app -->

  <!-- Inclusion du script -->
  <script src="script.js"></script>

  <!-- Fonction pour basculer métrique / impérial -->
  <script>
    function toggleMeasurementSystem() {
      const system = document.getElementById('measurementSystem').value;
      const metricInputs = document.querySelectorAll('.metric-input');
      const imperialInputs = document.querySelectorAll('.imperial-input');

      if (system === 'metric') {
        metricInputs.forEach(el => el.style.display = 'block');
        imperialInputs.forEach(el => el.style.display = 'none');
      } else {
        metricInputs.forEach(el => el.style.display = 'none');
        imperialInputs.forEach(el => el.style.display = 'block');
      }
    }
  </script>
</body>
</html>
